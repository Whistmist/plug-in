$(document).ready(function(){var t=chrome.extension.getBackgroundPage();document.title=chrome.i18n.getMessage("extName")+" - "+chrome.i18n.getMessage("optionPage");$("#menu_title").text(chrome.i18n.getMessage("extName"));$("#version").html(t.version);$("#ad_opacity_opt").hide();$('div[option="'+t.getOption("replace")+'"].replace').addClass("on");$('div[option="'+t.getOption("html5")+'"].html5').addClass("on");$('div[option="'+t.getOption("contextmenu")+'"].contextmenu').addClass("on");$('div[option="'+t.getOption("dynamic")+'"].dynamic').addClass("on");$('div[option="'+t.getOption("dlquality")+'"].dlquality').addClass("on");$('div[option="'+t.getOption("rel_search")+'"].rel_search').addClass("on");var e=t.getOption("ad");$('div[option="'+e+'"].ad').addClass("on");if(e=="fade")$("#ad_opacity_opt").show();$("#ad_opacity").val(t.getOption("ad_opacity"));$(".ad").click(function(){if($(this).hasClass("on"))return false;$(".ad").removeClass("on");$(this).addClass("on");if($(this).attr("option")=="fade")$("#ad_opacity_opt").slideDown(300);else $("#ad_opacity_opt").slideUp(300);t.setOption("ad",$(this).attr("option"),true);updatepreview()});$("#ad_opacity").change(function(){t.setOption("ad_opacity",$(this).val(),true);updatepreview()});$(".dynamic").click(function(){if($(this).hasClass("on"))return false;$(".dynamic").removeClass("on");$(this).addClass("on");t.setOption("dynamic",$(this).attr("option"))});$(".replace").click(function(){if($(this).hasClass("on"))return false;$(".replace").removeClass("on");$(this).addClass("on");t.setOption("replace",$(this).attr("option"))});$(".html5").click(function(){if($(this).hasClass("on"))return false;$(".html5").removeClass("on");$(this).addClass("on");t.setOption("html5",$(this).attr("option"))});$(".contextmenu").click(function(){if($(this).hasClass("on"))return false;$(".contextmenu").removeClass("on");$(this).addClass("on");t.setOption("contextmenu",$(this).attr("option"));if($(this).attr("option")=="on"){chrome.contextMenus.create({title:chrome.i18n.getMessage("searchBili"),contexts:["selection"],onclick:t.searchBilibili})}else{chrome.contextMenus.removeAll()}});$(".dlquality").click(function(){if($(this).hasClass("on"))return false;$(".dlquality").removeClass("on");$(this).addClass("on");t.setOption("dlquality",$(this).attr("option"));updatepreview()});$(".rel_search").click(function(){if($(this).hasClass("on"))return false;$(".rel_search").removeClass("on");$(this).addClass("on");t.setOption("rel_search",$(this).attr("option"));updatepreview()})});